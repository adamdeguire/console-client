(this["webpackJsonpconsole-client"]=this["webpackJsonpconsole-client"]||[]).push([[0],{108:function(e,t,n){},109:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(31),o=n.n(s),c=(n(79),n(27)),i=n(8),l=n(9),u=n(11),d=n(10),h=n(15),m=n(119),j=n(2),g=n(3),b=n(0),p=["user","component","render"],O=function(e){var t=e.user,n=e.component,a=e.render,r=Object(g.a)(e,p);return t&&a?Object(b.jsx)(h.b,Object(j.a)(Object(j.a)({},r),{},{render:a})):Object(b.jsx)(h.b,Object(j.a)(Object(j.a)({},r),{},{render:function(e){return t?Object(b.jsx)(n,Object(j.a)({},e)):Object(b.jsx)(h.a,{to:"/sign-in"})}}))},f=n(55),v=(n(88),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleClose=function(){return a.setState({show:!1})},a.state={show:!0},a.timeoutId=null,a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.timeoutId=setTimeout(this.handleClose,5e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutId)}},{key:"render",value:function(){var e=this.props,t=e.variant,n=e.heading,a=e.message,r=e.deleteAlert,s=e.id;return this.state.show||setTimeout((function(){r(s)}),300),Object(b.jsx)(f.a,{dismissible:!0,show:this.state.show,variant:t,onClose:this.handleClose,children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)(f.a.Heading,{children:n}),Object(b.jsx)("p",{className:"alert-body",children:a})]})})}}]),n}(r.a.Component)),x=n(73),C=n(40),w=n(12),y=n(32),S=n.n(y),k=n(39),A="https://console-app-api.herokuapp.com",N="http://localhost:4741",I="localhost"===window.location.hostname?N:A,L=n(16),E=n.n(L),P={},_=function(){var e;return function(){var t=Object(k.a)(S.a.mark((function t(n){var a,r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.cancel(),e=E.a.CancelToken.source(),t.prev=2,!P[n]){t.next=5;break}return t.abrupt("return",P[n]);case 5:return t.next=7,E()(n,{cancelToken:e.token});case 7:return a=t.sent,r=a.data.results,P[n]=r,t.abrupt("return",r);case 13:t.prev=13,t.t0=t.catch(2),E.a.isCancel(t.t0)?console.log("Request canceled",t.t0.message):console.log("Something went wrong: ",t.t0.message);case 16:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e){return t.apply(this,arguments)}}()}(),D=(n(108),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={users:null,loading:!1,value:""},e.search=function(){var t=Object(k.a)(S.a.mark((function t(n){var a,r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,_("".concat(I,"/users?users=").concat(n));case 3:a=t.sent,r=a,e.setState({users:r,loading:!1});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onChangeHandler=function(){var t=Object(k.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.search(n.target.value),e.setState({value:n.target.value});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onBlurHandler=function(t){t.target.classList.contains("search")||e.setState({value:""})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onBlurHandler)}},{key:"renderUsers",get:function(){var e="";return this.state.users&&(e=this.state.users.map((function(e){return Object(b.jsx)("div",{className:"search result",children:Object(b.jsx)(w.b,{className:"search resultLink",to:"/profile/".concat(e.username),children:e.username})},e._id)}))),this.state.value||(e=""),e}},{key:"render",value:function(){var e=this,t=this.state.value,n=0===this.renderUsers.length&&t.length>0,a=Object(b.jsx)("div",{className:"result",children:"No results"});return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"search searchBar",children:[Object(b.jsx)("input",{className:"search searchInput",value:t,onChange:function(t){return e.onChangeHandler(t)},placeholder:"Search Users"}),Object(b.jsx)("div",{className:"search resultContainer",children:n?a:this.renderUsers})]})})}}]),n}(a.Component)),U=(n(109),Object(b.jsxs)(a.Fragment,{children:[Object(b.jsx)(D,{}),Object(b.jsx)(w.c,{to:"/change-password",className:"nav-link",children:"Change Password"}),Object(b.jsx)(w.c,{to:"/sign-out",className:"nav-link",children:"Sign Out"})]})),T=Object(b.jsxs)(a.Fragment,{children:[Object(b.jsx)(w.c,{to:"/sign-up",className:"nav-link",children:"Sign Up"}),Object(b.jsx)(w.c,{to:"/sign-in",className:"nav-link",children:"Sign In"})]}),B=function(e){var t=e.user;return Object(b.jsxs)(C.a,{className:"navbar-light",id:"header",expand:"md",children:[Object(b.jsx)(C.a.Brand,{children:Object(b.jsx)(w.b,{to:"/home",id:"headerTitle",children:"{ console }"})}),Object(b.jsx)(C.a.Toggle,{className:"navbar-light","aria-controls":"basic-navbar-nav"}),Object(b.jsx)(C.a.Collapse,{id:"basic-navbar-nav",children:Object(b.jsx)(x.a,{className:"ml-auto",children:t?U:T})})]})},F=n(7),z=function(e){return E()({url:I+"/sign-in/",method:"POST",data:{credentials:{email:e.email,password:e.password}}})},G="Couldn't find logs, please refresh the page and try again. Error: ",M=n(5),q=n(14),H=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=function(e){return a.setState(Object(F.a)({},e.target.name,e.target.value))},a.onSignUp=function(e){e.preventDefault();var t,n=a.props,r=n.msgAlert,s=n.history,o=n.setUser;(t=a.state,E()({method:"POST",url:I+"/sign-up/",data:{credentials:{username:t.username,email:t.email,password:t.password,password_confirmation:t.passwordConfirmation}}})).then((function(){return z(a.state)})).then((function(e){return o(e.data.user)})).then((function(){return r({heading:"Sign Up Success",message:"Successfully registered! You've been signed in as well.",variant:"success"})})).then((function(){return s.push("/home")})).catch((function(e){a.setState({email:"",password:"",passwordConfirmation:""}),r({heading:"Sign Up Failed with error: "+e.message,message:"Registration failed. Email may be taken, or passwords don't match.",variant:"danger"})}))},a.state={username:"",email:"",password:"",passwordConfirmation:""},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.email,a=e.password,r=e.passwordConfirmation;return Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(b.jsx)("h3",{children:"Sign Up"}),Object(b.jsxs)(M.a,{onSubmit:this.onSignUp,children:[Object(b.jsxs)(M.a.Group,{controlId:"email",children:[Object(b.jsx)(M.a.Label,{children:"Username"}),Object(b.jsx)(M.a.Control,{required:!0,type:"username",name:"username",value:t,placeholder:"Enter Username",onChange:this.handleChange})]}),Object(b.jsxs)(M.a.Group,{controlId:"email",children:[Object(b.jsx)(M.a.Label,{children:"Email address"}),Object(b.jsx)(M.a.Control,{required:!0,type:"email",name:"email",value:n,placeholder:"Enter Email",onChange:this.handleChange})]}),Object(b.jsxs)(M.a.Group,{controlId:"password",children:[Object(b.jsx)(M.a.Label,{children:"Password"}),Object(b.jsx)(M.a.Control,{required:!0,name:"password",value:a,type:"password",placeholder:"Password",onChange:this.handleChange})]}),Object(b.jsxs)(M.a.Group,{controlId:"passwordConfirmation",children:[Object(b.jsx)(M.a.Label,{children:"Password Confirmation"}),Object(b.jsx)(M.a.Control,{required:!0,name:"passwordConfirmation",value:r,type:"password",placeholder:"Confirm Password",onChange:this.handleChange})]}),Object(b.jsx)(q.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})}}]),n}(a.Component),J=Object(h.f)(H),V=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=function(e){return a.setState(Object(F.a)({},e.target.name,e.target.value))},a.toggleChecked=function(){a.setState((function(e){return{checked:!e.checked}}))},a.onSignIn=function(e){e.preventDefault();var t=a.props,n=t.msgAlert,r=t.history,s=t.setUser,o=a.state.checked;z(a.state).then((function(e){return s(e.data.user),e.data.user})).then((function(e){var t=JSON.stringify(e);window&&o&&window.localStorage.setItem("user",t)})).then((function(){return n({heading:"Sign In Success",message:"Welcome!",variant:"success"})})).then((function(){return r.push("/home")})).catch((function(e){a.setState({email:"",password:""}),n({heading:"Sign In Failed with error: "+e.message,message:"Failed to sign in. Check your email and password and try again.",variant:"danger"})}))},a.state={email:"",password:"",checked:!1},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,a=e.checked;return Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(b.jsx)("h3",{children:"Sign In"}),Object(b.jsxs)(M.a,{onSubmit:this.onSignIn,children:[Object(b.jsxs)(M.a.Group,{controlId:"email",children:[Object(b.jsx)(M.a.Label,{children:"Email address"}),Object(b.jsx)(M.a.Control,{required:!0,type:"email",name:"email",value:t,placeholder:"Enter email",onChange:this.handleChange})]}),Object(b.jsxs)(M.a.Group,{controlId:"password",children:[Object(b.jsx)(M.a.Label,{children:"Password"}),Object(b.jsx)(M.a.Control,{required:!0,name:"password",value:n,type:"password",placeholder:"Password",onChange:this.handleChange})]}),Object(b.jsx)(q.a,{variant:"primary",type:"submit",children:"Submit"}),Object(b.jsx)(M.a.Check,{type:"checkbox",id:"default-checkbox",label:"Keep me logged in",checked:a,onChange:this.toggleChecked})]})]})})}}]),n}(a.Component),W=Object(h.f)(V),Y=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.msgAlert,n=e.history,a=e.clearUser;(function(e){return E()({url:I+"/sign-out/",method:"DELETE",headers:{Authorization:"Bearer ".concat(e.token)}})})(e.user).finally((function(){return t({heading:"Signed Out Successfully",message:"Come back soon!",variant:"success"})})).finally((function(){window&&window.localStorage.removeItem("user")})).finally((function(){return n.push("/sign-in")})).finally((function(){return a()}))}},{key:"render",value:function(){return""}}]),n}(a.Component),R=Object(h.f)(Y),K=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=function(e){return a.setState(Object(F.a)({},e.target.name,e.target.value))},a.onChangePassword=function(e){e.preventDefault();var t=a.props,n=t.msgAlert,r=t.history,s=t.user;(function(e,t){return E()({url:I+"/change-password/",method:"PATCH",headers:{Authorization:"Bearer ".concat(t.token)},data:{passwords:{old:e.oldPassword,new:e.newPassword}}})})(a.state,s).then((function(){return n({heading:"Change Password Success",message:"Password changed successfully!",variant:"success"})})).then((function(){return r.push("/")})).catch((function(e){a.setState({oldPassword:"",newPassword:""}),n({heading:"Change Password Failed with error: "+e.message,message:"Failed to change passwords. Check your old password and try again.",variant:"danger"})}))},a.state={oldPassword:"",newPassword:""},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.oldPassword,n=e.newPassword;return Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(b.jsx)("h3",{children:"Change Password"}),Object(b.jsxs)(M.a,{onSubmit:this.onChangePassword,children:[Object(b.jsxs)(M.a.Group,{controlId:"oldPassword",children:[Object(b.jsx)(M.a.Label,{children:"Old password"}),Object(b.jsx)(M.a.Control,{required:!0,name:"oldPassword",value:t,type:"password",placeholder:"Old Password",onChange:this.handleChange})]}),Object(b.jsxs)(M.a.Group,{controlId:"newPassword",children:[Object(b.jsx)(M.a.Label,{children:"New Password"}),Object(b.jsx)(M.a.Control,{required:!0,name:"newPassword",value:n,type:"password",placeholder:"New Password",onChange:this.handleChange})]}),Object(b.jsx)(q.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})}}]),n}(a.Component),Q=Object(h.f)(K),X=function(e,t){return E()({method:"GET",url:"".concat(I,"/logs/").concat(t),headers:{Authorization:"Bearer ".concat(e.token)}})},Z=n(36),$=n.n(Z),ee=n(29),te=(n(50),n(51),n(112),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=Object(F.a)({},e.target.name,e.target.value);a.setState((function(e){return{log:Object(j.a)(Object(j.a)({},e.log),t)}}))},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.user,r=t.msgAlert,s=t.history,o=t.match;(function(e,t,n){return E()({method:"PATCH",url:"".concat(I,"/logs/").concat(n),headers:{Authorization:"Bearer ".concat(t.token)},data:{log:{title:e.title,content:e.content}}})})(a.state.log,n,o.params.id).then((function(e){return s.push("/logs/"+o.params.id)})).then((function(){return r({heading:"Log Updated!",message:"Nice work, go check out your log.",variant:"success"})})).catch((function(e){r({heading:"Log update failed :(",message:"Something went wrong: "+e.message,variant:"danger"})}))},a.state={log:{title:"",content:""}},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.match,a=t.user,r=t.msgAlert;X(a,n.params.id).then((function(t){return e.setState({log:t.data.log})})).then((function(){return r({heading:"Show log success",message:"Check out the log",variant:"success"})})).catch((function(e){return r({heading:"Show log failed :(",message:"Something went wrong: "+e.message,variant:"danger"})}))}},{key:"render",value:function(){var e=this,t=this.state.log,n=this.props.match;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h5",{id:"updateLogHeader",children:"Edit Log"}),Object(b.jsx)("div",{className:"logContainer",children:Object(b.jsxs)(M.a,{onSubmit:this.handleSubmit,children:[Object(b.jsx)(M.a.Group,{controlId:"title",children:Object(b.jsx)(M.a.Control,{required:!0,className:"titleInput",name:"title",value:t.title,placeholder:"Log Title",onChange:this.handleChange})}),Object(b.jsx)(M.a.Group,{controlId:"content",children:Object(b.jsx)($.a,{className:"border codeEditor",value:t.content,onValueChange:function(t){return e.setState({content:t})},highlight:function(e){return Object(ee.highlight)(e,ee.languages.js)},padding:10})}),Object(b.jsx)(q.a,{id:"updateLogButton",variant:"primary",type:"submit",children:"Update"})]})}),Object(b.jsx)(w.b,{to:"/logs/".concat(n.params.id),children:Object(b.jsx)(q.a,{size:"sm",className:"btn",children:"Go back"})})]})}}]),n}(a.Component)),ne=Object(h.f)(te),ae=(n(113),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=function(e){return a.setState(Object(F.a)({},e.target.name,e.target.value))},a.onCreateComment=function(e){e.preventDefault();var t=Date.now();a.setState({createdAt:t},(function(){var e=a.props,t=e.msgAlert,n=e.user,r=e.logId,s=e.updateComments,o=e.showComments,c=e.toggleComments,i=a.state,l=i.content,u=i._id,d=i.timestamp;(function(e,t,n){return E()({method:"POST",url:I+"/logs/".concat(n,"/comments/"),headers:{Authorization:"Bearer ".concat(t.token)},data:{comment:{ownerName:e.ownerName,owner:e.owner,content:e.content,_id:e._id,createdAt:e.createdAt}}})})(a.state,n,r).then((function(){return s({ownerName:n.username,owner:n._id,content:l,_id:u,createdAt:d})})).then((function(){o||c()})).then((function(){a.setState({content:""})})).catch((function(e){t({heading:"Couldn't Create Comment",message:"Failed to create comment, please double check your input and try again. Error: "+e.message,variant:"danger"})})).finally((function(){a.setState({_id:Object(m.a)()})}))}))},a.state={ownerName:e.user.username,content:"",created:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({_id:Object(m.a)()})}},{key:"render",value:function(){var e=this.state.content;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(M.a,{onSubmit:this.onCreateComment,children:Object(b.jsx)(M.a.Group,{children:Object(b.jsx)(M.a.Control,{required:!0,autoComplete:"off",className:"commentInput",name:"content",value:e,placeholder:"Add Comment",onChange:this.handleChange})})})})}}]),n}(a.Component)),re=Object(h.f)(ae),se=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(F.a)({},e.target.name,e.target.value))},a.onEditComment=function(e){e.preventDefault();var t=a.props,n=t.comment,r=t.user,s=t.logId,o=t.updateComments,c=t.toggle,i=a.state.content,l=Object(j.a)({},n);l.content=i,function(e,t,n){E()({method:"PATCH",url:I+"/logs/".concat(n,"/comments/"),headers:{Authorization:"Bearer ".concat(t.token)},data:{comment:{ownerName:e.ownerName,owner:e.owner,content:e.content,_id:e._id}}})}(l,r,s),o(l),c("showEdit")},a.state={deleted:!1,content:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.comment;this.setState({content:e.content})}},{key:"render",value:function(){var e=this.state,t=e.deleted,n=e.content;return t?Object(b.jsx)(h.a,{to:{pathname:"/home"}}):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(M.a,{onSubmit:this.onEditComment,children:[Object(b.jsx)(M.a.Group,{controlId:"content",children:Object(b.jsx)(M.a.Control,{required:!0,name:"content",value:n,placeholder:"Comment",onChange:this.handleChange})}),Object(b.jsx)(q.a,{variant:"primary",type:"submit",children:"Update"})]})})}}]),n}(a.Component),oe=Object(h.f)(se),ce=(n(114),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){var e=a.props.createdAt,t=new Date(e),n=(Date.now()-t)/1e3,r=n/60,s=r/60,o=s/24,c=o/7,i=c/4,l=n<60?{value:n,unit:"second"}:r<60?{value:r,unit:"minute"}:s<24?{value:s,unit:"hour"}:o<7?{value:o,unit:"day"}:c<4?{value:c,unit:"week"}:i<12?{value:i,unit:"month"}:{value:i/12,unit:"year"};l.value=l.value.toFixed(0);var u="1"===l.value?"":"s",d=isNaN(l.value)?"Just now":"".concat(l.value," ").concat(l.unit).concat(u," ago");a.setState({dateText:d})},a.state={dateText:""},a}return Object(l.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{className:"date",children:this.state.dateText})}}]),n}(a.Component)),ie=Object(h.f)(ce),le=(n(115),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).toggle=function(e){a.setState((function(t){return Object(F.a)({},e,!t[e])}))},a.onDestroyComment=function(e){e.preventDefault();var t=a.props,n=t.comment,r=t.user,s=t.logId,o=t.updateComments;!function(e,t,n){E()({method:"DELETE",url:I+"/logs/".concat(t,"/comments/"),headers:{Authorization:"Bearer ".concat(e.token)},data:{commentId:n,userId:e._id}})}(r,s,n._id),o(n._id)},a.state={comment:null,showEdit:!1,showButtons:!1,deleted:!1},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.deleted,a=t.showEdit,r=t.showButtons,s=this.props,o=s.comment,c=s.user,i=s.msgAlert,l=s.logId,u=s.updateComments,d=o.owner===c._id&&r&&!a,m=Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(q.a,{size:"sm",variant:"secondary",className:"commentButton",onClick:function(){return e.toggle("showEdit")},children:"Edit"}),Object(b.jsx)(q.a,{size:"sm",variant:"danger",className:"commentButton",onClick:this.onDestroyComment,children:"Delete"})]}),j=Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(oe,{toggle:this.toggle,updateComments:u,msgAlert:i,comment:o,logId:l,user:c}),Object(b.jsx)(q.a,{size:"sm",variant:"danger",onClick:function(){return e.toggle("showEdit")},children:"Cancel"})]});return n?Object(b.jsx)(h.a,{to:{pathname:"/home"}}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{onClick:function(){return e.toggle("showButtons")},children:Object(b.jsxs)("div",{className:"comment",children:[Object(b.jsx)(w.b,{to:"/profile/".concat(o.ownerName),className:"commentOwner",children:o.ownerName}),a?j:o.content,Object(b.jsx)(ie,{createdAt:o.createdAt}),d?m:""]})})})}}]),n}(a.Component)),ue=Object(h.f)(le),de=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={comments:[],loading:!1},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.comments,n=e.msgAlert,a=e.user,r=e.logId,s=e.logOwner,o=e.updateComments;return Object(b.jsx)("div",{children:t.map((function(e){return Object(b.jsx)("div",{children:Object(b.jsx)(ue,{updateComments:o,logOwner:s,msgAlert:n,comment:e,logId:r,user:a})},e._id)}))})}}]),n}(a.Component),he=(n(65),n(66),n(67),n(68),n(69),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).goToLog=function(e){if(e.target.classList.contains("log")){var t=a.props,n=t.log;t.history.push("/logs/".concat(n._id))}},a.updateComments=function(e){var t=a.state.comments,n=Object(c.a)(t);if("string"===typeof e){var r=t.findIndex((function(t){return t._id===e}));n.splice(r,1),a.setState({comments:n})}else{var s=t.findIndex((function(t){return t._id===e._id}));s>=0?(n.splice(s,1,e),a.setState({comments:n})):a.setState((function(t){return{comments:[].concat(Object(c.a)(t.comments),[e])}}))}},a.toggleComments=function(){a.setState((function(e){return{showComments:!e.showComments}}))},a.state={comments:[],showComments:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.log;this.setState({comments:e.comments})}},{key:"render",value:function(){var e=this,t=this.props,n=t.msgAlert,a=t.user,r=t.log,s=this.state,o=s.showComments,c=s.comments,i=1===c.length?"":"s",l=Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(de,{updateComments:this.updateComments,msgAlert:n,user:a,comments:c,logId:r._id}),Object(b.jsx)(re,{updateComments:this.updateComments,toggleComments:this.toggleComments,showComments:o,msgAlert:n,user:a,logId:r._id,logOwner:r.owner._id})]});return Object(b.jsxs)("div",{className:"log logContainer",onClick:function(t){return e.goToLog(t)},children:[Object(b.jsxs)("div",{className:"log logTitle",children:[Object(b.jsx)(w.b,{to:"/profile/".concat(r.owner.username),className:"logOwner",children:r.owner.username}),r.title,Object(b.jsx)(ie,{createdAt:r.createdAt})]}),Object(b.jsx)($.a,{className:"border codeEditor log logContent",placeholder:"// your code here",value:r.content,onValueChange:function(){return null},highlight:function(e){return Object(ee.highlight)(e,ee.languages.js)},padding:10}),Object(b.jsx)(q.a,{className:"showComments",size:"sm",variant:"outline-primary",onClick:this.toggleComments,children:o?"Hide Comments":"".concat(c.length," Comment").concat(i)}),o?l:""]})}}]),n}(a.Component)),me=Object(h.f)(he),je=(n(116),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=function(e){return a.setState(Object(F.a)({},e.target.name,e.target.value))},a.onCreateLog=function(e){e.preventDefault();var t=a.props,n=t.msgAlert,r=t.history,s=t.user,o=t.updateLogs;(function(e,t){return E()({method:"POST",url:I+"/logs/",headers:{Authorization:"Bearer ".concat(t.token)},data:{log:{owner:e.owner,title:e.title,content:e.content}}})})(a.state,s).then((function(e){return a.setState({logId:e.data.log._id}),e})).then((function(e){return o({owner:s,title:a.state.title,content:a.state.content,comments:[],_id:e.data.log._id})})).then((function(){return r.push("/home")})).then((function(){return a.setState({title:"",content:""})})).then((function(){n({heading:"Log Created",message:"Your log has successfully been created.",variant:"success"})})).catch((function(e){n({heading:"Couldn't Create Log",message:"Failed to create log, please double check your input and try again. Error: "+e.message,variant:"danger"})}))},a.state={title:"",content:"",logId:null,showCreate:!1},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.title;return t.showCreate?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h5",{id:"createLogHeader",children:"Create Log"}),Object(b.jsx)("div",{className:"logContainer",children:Object(b.jsxs)(M.a,{onSubmit:this.onCreateLog,children:[Object(b.jsx)(M.a.Group,{controlId:"title",children:Object(b.jsx)(M.a.Control,{required:!0,autoComplete:"off",className:"titleInput",name:"title",value:n,placeholder:"Log Title",onChange:this.handleChange})}),Object(b.jsx)(M.a.Group,{controlId:"content",children:Object(b.jsx)($.a,{className:"border codeEditor",placeholder:"// your code here",value:this.state.content,onValueChange:function(t){return e.setState({content:t})},highlight:function(e){return Object(ee.highlight)(e,ee.languages.js)},padding:10})}),Object(b.jsx)(q.a,{className:"logButton",onClick:function(){return e.setState({showCreate:!1})},children:"Cancel"}),Object(b.jsx)(q.a,{className:"logButton",id:"createLogButton",variant:"primary",type:"submit",children:"Create"})]})})]}):Object(b.jsx)(q.a,{className:"logButton",onClick:function(){return e.setState({showCreate:!0})},children:"New Log"})}}]),n}(a.Component)),ge=Object(h.f)(je),be=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).updateLogs=function(e){a.setState((function(t){return{logs:[e].concat(Object(c.a)(t.logs))}}))},a.state={logs:[],loading:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.user,a=t.msgAlert;(function(e){return E()({method:"GET",url:I+"/home/",headers:{Authorization:"Bearer ".concat(e.token)}})})(n).then((function(t){return e.setState({logs:t.data.logs.reverse()})})).catch((function(e){a({heading:"Couldn't Create Log",message:G+e.message,variant:"danger"})}))}},{key:"render",value:function(){var e=this.state.logs,t=this.props,n=t.user,a=t.msgAlert;return Object(b.jsxs)("div",{children:[Object(b.jsx)(ge,{updateLogs:this.updateLogs,msgAlert:a,user:n}),e.map((function(e){return Object(b.jsx)("div",{children:Object(b.jsx)(me,{msgAlert:a,user:n,log:e,comments:e.comments})},e._id)}))]})}}]),n}(a.Component),pe=n(72),Oe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).destroy=function(){var e=a.props,t=e.user,n=e.match,r=e.msgAlert;(function(e,t){return E()({method:"DELETE",url:"".concat(I,"/logs/").concat(t),headers:{Authorization:"Bearer ".concat(e.token)}})})(t,n.params.id).then((function(){r({heading:"Log Deleted",message:"Your log has successfully been deleted.",variant:"success"})})).then((function(){return a.setState({deleted:!0})})).catch((function(e){r({heading:"Couldn't Delete Log",message:"Something went wrong while deleting this log, please refresh and try again. Error: "+e.message,variant:"danger"})}))},a.state={log:null,deleted:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.user,a=t.match,r=t.msgAlert;X(n,a.params.id).then((function(t){return e.setState({log:t.data.log})})).catch((function(e){r({heading:"Couldn't Create Log",message:"Couldn't find this log. Please refresh the page and try again. Error: "+e.message,variant:"danger"})}))}},{key:"render",value:function(){var e=this.state,t=e.log,n=e.deleted,a=this.props,r=a.user,s=a.msgAlert,o=Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(w.b,{to:"/logs/".concat(this.props.match.params.id,"/edit"),children:Object(b.jsx)(q.a,{size:"sm",variant:"primary",children:"Edit"})}),Object(b.jsx)(q.a,{size:"sm",variant:"danger",onClick:this.destroy,children:"Delete log"})]});return t?n?Object(b.jsx)(h.a,{to:{pathname:"/home"}}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(me,{msgAlert:s,user:r,log:t,comments:t.comments}),Object(b.jsx)(w.b,{to:"/home",children:Object(b.jsx)(q.a,{size:"sm",className:"btn",children:"Go back"})}),t.owner._id===r._id?o:""]}):Object(b.jsx)(pe.a,{animation:"border",role:"status",children:Object(b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}}]),n}(a.Component),fe=Object(h.f)(Oe),ve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).getUserProfile=function(e){if(a._isMounted){var t=a.props,n=t.user,r=t.msgAlert;(function(e,t){return E()({method:"GET",url:"".concat(I).concat(t),headers:{Authorization:"Bearer ".concat(e.token)}})})(n,e).then((function(e){return a.setState({logs:e.data.logs})})).catch((function(e){r({heading:"Couldn't Create Log",message:G+e.message,variant:"danger"})}))}},a.updateLogs=function(e){a.setState((function(t){return{logs:[e].concat(Object(c.a)(t.logs))}}))},a._isMounted=!1,a.state={logs:[],path:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=this.props.history,n=this.state.path;this.getUserProfile(t.location.pathname),this.setState({path:t.location.pathname}),this.unlisten=t.listen((function(t){var a=t.pathname.split("/")[1];t.pathname!==n&&"profile"===a&&e.getUserProfile(t.pathname)}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.unlisten()}},{key:"render",value:function(){var e=this.state.logs,t=this.props,n=t.user,a=t.msgAlert;return Object(b.jsxs)("div",{children:[Object(b.jsx)(ge,{updateLogs:this.updateLogs,msgAlert:a,user:n}),e.map((function(e){return Object(b.jsx)("div",{children:Object(b.jsx)(me,{msgAlert:a,user:n,log:e,comments:e.comments})},e._id)}))]})}}]),n}(a.Component),xe=Object(h.f)(ve),Ce=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).setUser=function(e){return a.setState({user:e})},a.clearUser=function(){return a.setState({user:null})},a.deleteAlert=function(e){a.setState((function(t){return{msgAlerts:t.msgAlerts.filter((function(t){return t.id!==e}))}}))},a.msgAlert=function(e){var t=e.heading,n=e.message,r=e.variant,s=Object(m.a)();a.setState((function(e){return{msgAlerts:[].concat(Object(c.a)(e.msgAlerts),[{heading:t,message:n,variant:r,id:s}])}}))},a.state={user:null,msgAlerts:[]},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.history,t=JSON.parse(window.localStorage.getItem("user"));window&&(this.setUser(t),e.push("/home"))}},{key:"render",value:function(){var e=this,t=this.state,n=t.msgAlerts,a=t.user;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(B,{user:a}),n.map((function(t){return Object(b.jsx)(v,{heading:t.heading,variant:t.variant,message:t.message,id:t.id,deleteAlert:e.deleteAlert},t.id)})),Object(b.jsxs)("main",{className:"container col-sm-12 col-lg-6",children:[Object(b.jsx)(h.b,{path:"/sign-up",render:function(){return Object(b.jsx)(J,{msgAlert:e.msgAlert,setUser:e.setUser})}}),Object(b.jsx)(h.b,{path:"/sign-in",render:function(){return Object(b.jsx)(W,{msgAlert:e.msgAlert,setUser:e.setUser})}}),Object(b.jsx)(O,{user:a,path:"/sign-out",render:function(){return Object(b.jsx)(R,{msgAlert:e.msgAlert,clearUser:e.clearUser,user:a})}}),Object(b.jsx)(O,{user:a,path:"/change-password",render:function(){return Object(b.jsx)(Q,{msgAlert:e.msgAlert,user:a})}}),Object(b.jsx)(O,{user:a,exact:!0,path:"/logs/:id/edit",render:function(){return Object(b.jsx)(ne,{msgAlert:e.msgAlert,user:a})}}),Object(b.jsx)(O,{user:a,exact:!0,path:"/home",render:function(){return Object(b.jsx)(be,{msgAlert:e.msgAlert,user:a})}}),Object(b.jsx)(O,{user:a,exact:!0,path:"/logs/:id",render:function(){return Object(b.jsx)(fe,{msgAlert:e.msgAlert,user:a})}}),Object(b.jsx)(O,{user:a,exact:!0,path:"/profile/:username",render:function(){return Object(b.jsx)(xe,{msgAlert:e.msgAlert,user:a})}})]})]})}}]),n}(a.Component),we=Object(h.f)(Ce),ye=Object(b.jsx)(w.a,{basename:"/console-client",children:Object(b.jsx)(we,{})});o.a.render(ye,document.getElementById("root"))},69:function(e,t,n){},79:function(e,t,n){},88:function(e,t,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.bddc7af3.chunk.js.map