(this["webpackJsonpconsole-client"]=this["webpackJsonpconsole-client"]||[]).push([[0],{108:function(e,t,n){},109:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(31),o=n.n(r),c=(n(79),n(27)),i=n(8),u=n(9),l=n(11),d=n(10),h=n(15),m=n(119),j=n(2),p=n(3),b=n(0),g=["user","component","render"],O=function(e){var t=e.user,n=e.component,a=e.render,s=Object(p.a)(e,g);return t&&a?Object(b.jsx)(h.b,Object(j.a)(Object(j.a)({},s),{},{render:a})):Object(b.jsx)(h.b,Object(j.a)(Object(j.a)({},s),{},{render:function(e){return t?Object(b.jsx)(n,Object(j.a)({},e)):Object(b.jsx)(h.a,{to:"/sign-in"})}}))},f=n(55),v=(n(88),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleClose=function(){return a.setState({show:!1})},a.state={show:!0},a.timeoutId=null,a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.timeoutId=setTimeout(this.handleClose,5e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutId)}},{key:"render",value:function(){var e=this.props,t=e.variant,n=e.heading,a=e.message,s=e.deleteAlert,r=e.id;return this.state.show||setTimeout((function(){s(r)}),300),Object(b.jsx)(f.a,{dismissible:!0,show:this.state.show,variant:t,onClose:this.handleClose,children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)(f.a.Heading,{children:n}),Object(b.jsx)("p",{className:"alert-body",children:a})]})})}}]),n}(s.a.Component)),x=n(73),C=n(40),w=n(12),y=n(32),S=n.n(y),k=n(39),A="https://console-app-api.herokuapp.com",P="http://localhost:4741",N="localhost"===window.location.hostname?P:A,I=n(16),E=n.n(I),_={},U=function(){var e;return function(){var t=Object(k.a)(S.a.mark((function t(n){var a,s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.cancel(),e=E.a.CancelToken.source(),t.prev=2,!_[n]){t.next=5;break}return t.abrupt("return",_[n]);case 5:return t.next=7,E()(n,{cancelToken:e.token});case 7:return a=t.sent,s=a.data.results,_[n]=s,t.abrupt("return",s);case 13:t.prev=13,t.t0=t.catch(2),E.a.isCancel(t.t0)?console.log("Request canceled",t.t0.message):console.log("Something went wrong: ",t.t0.message);case 16:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e){return t.apply(this,arguments)}}()}(),D=(n(108),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={users:null,loading:!1,value:""},e.search=function(){var t=Object(k.a)(S.a.mark((function t(n){var a,s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,U("".concat(N,"/users?users=").concat(n));case 3:a=t.sent,s=a,e.setState({users:s,loading:!1});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onChangeHandler=function(){var t=Object(k.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.search(n.target.value),e.setState({value:n.target.value});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(n,[{key:"renderUsers",get:function(){var e="";return this.state.users&&(e=this.state.users.map((function(e){return Object(b.jsx)("div",{className:"result",children:Object(b.jsx)(w.b,{className:"resultLink",to:"/posts?user=".concat(e._id),children:e.username})},e._id)}))),this.state.value||(e=""),e}},{key:"render",value:function(){var e=this,t=this.state.value,n=0===this.renderUsers.length&&t.length>0,a=Object(b.jsx)("div",{className:"result",children:"No results"});return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"searchBar",children:Object(b.jsx)("input",{className:"searchInput",value:t,onChange:function(t){return e.onChangeHandler(t)},placeholder:"Search Users"})}),Object(b.jsx)("div",{className:"resultContainer",children:n?a:this.renderUsers})]})}}]),n}(a.Component)),T=(n(109),Object(b.jsxs)(a.Fragment,{children:[Object(b.jsx)(w.c,{exact:!0,to:"/home",className:"nav-link",children:"Home"}),Object(b.jsx)(w.c,{to:"/change-password",className:"nav-link",children:"Change Password"}),Object(b.jsx)(w.c,{to:"/sign-out",className:"nav-link",children:"Sign Out"})]})),F=Object(b.jsxs)(a.Fragment,{children:[Object(b.jsx)(w.c,{to:"/sign-up",className:"nav-link",children:"Sign Up"}),Object(b.jsx)(w.c,{to:"/sign-in",className:"nav-link",children:"Sign In"})]}),B=function(e){var t=e.user;return Object(b.jsxs)(C.a,{id:"header",expand:"md",children:[Object(b.jsx)(C.a.Brand,{children:Object(b.jsx)(w.b,{to:"/home",id:"headerTitle",children:"{ console }"})}),Object(b.jsx)(C.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(b.jsx)(C.a.Collapse,{id:"basic-navbar-nav",children:Object(b.jsx)(x.a,{className:"ml-auto",children:t?T:F})}),Object(b.jsx)(D,{})]})},z=n(7),G=function(e){return E()({url:N+"/sign-in/",method:"POST",data:{credentials:{email:e.email,password:e.password}}})},M="Couldn't find posts, please refresh the page and try again. Error: ",L=n(5),q=n(14),H=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=function(e){return a.setState(Object(z.a)({},e.target.name,e.target.value))},a.onSignUp=function(e){e.preventDefault();var t,n=a.props,s=n.msgAlert,r=n.history,o=n.setUser;(t=a.state,E()({method:"POST",url:N+"/sign-up/",data:{credentials:{username:t.username,email:t.email,password:t.password,password_confirmation:t.passwordConfirmation}}})).then((function(){return G(a.state)})).then((function(e){return o(e.data.user)})).then((function(){return s({heading:"Sign Up Success",message:"Successfully registered! You've been signed in as well.",variant:"success"})})).then((function(){return r.push("/")})).catch((function(e){a.setState({email:"",password:"",passwordConfirmation:""}),s({heading:"Sign Up Failed with error: "+e.message,message:"Registration failed. Email may be taken, or passwords don't match.",variant:"danger"})}))},a.state={username:"",email:"",password:"",passwordConfirmation:""},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.email,a=e.password,s=e.passwordConfirmation;return Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(b.jsx)("h3",{children:"Sign Up"}),Object(b.jsxs)(L.a,{onSubmit:this.onSignUp,children:[Object(b.jsxs)(L.a.Group,{controlId:"email",children:[Object(b.jsx)(L.a.Label,{children:"Username"}),Object(b.jsx)(L.a.Control,{required:!0,type:"username",name:"username",value:t,placeholder:"Enter Username",onChange:this.handleChange})]}),Object(b.jsxs)(L.a.Group,{controlId:"email",children:[Object(b.jsx)(L.a.Label,{children:"Email address"}),Object(b.jsx)(L.a.Control,{required:!0,type:"email",name:"email",value:n,placeholder:"Enter Email",onChange:this.handleChange})]}),Object(b.jsxs)(L.a.Group,{controlId:"password",children:[Object(b.jsx)(L.a.Label,{children:"Password"}),Object(b.jsx)(L.a.Control,{required:!0,name:"password",value:a,type:"password",placeholder:"Password",onChange:this.handleChange})]}),Object(b.jsxs)(L.a.Group,{controlId:"passwordConfirmation",children:[Object(b.jsx)(L.a.Label,{children:"Password Confirmation"}),Object(b.jsx)(L.a.Control,{required:!0,name:"passwordConfirmation",value:s,type:"password",placeholder:"Confirm Password",onChange:this.handleChange})]}),Object(b.jsx)(q.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})}}]),n}(a.Component),J=Object(h.f)(H),V=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=function(e){return a.setState(Object(z.a)({},e.target.name,e.target.value))},a.toggleChecked=function(){a.setState((function(e){return{checked:!e.checked}}))},a.onSignIn=function(e){e.preventDefault();var t=a.props,n=t.msgAlert,s=t.history,r=t.setUser,o=a.state.checked;G(a.state).then((function(e){return r(e.data.user),e.data.user})).then((function(e){var t=JSON.stringify(e);window&&o&&window.localStorage.setItem("user",t)})).then((function(){return n({heading:"Sign In Success",message:"Welcome!",variant:"success"})})).then((function(){return s.push("/home")})).catch((function(e){a.setState({email:"",password:""}),n({heading:"Sign In Failed with error: "+e.message,message:"Failed to sign in. Check your email and password and try again.",variant:"danger"})}))},a.state={email:"",password:"",checked:!1},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,a=e.checked;return Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(b.jsx)("h3",{children:"Sign In"}),Object(b.jsxs)(L.a,{onSubmit:this.onSignIn,children:[Object(b.jsxs)(L.a.Group,{controlId:"email",children:[Object(b.jsx)(L.a.Label,{children:"Email address"}),Object(b.jsx)(L.a.Control,{required:!0,type:"email",name:"email",value:t,placeholder:"Enter email",onChange:this.handleChange})]}),Object(b.jsxs)(L.a.Group,{controlId:"password",children:[Object(b.jsx)(L.a.Label,{children:"Password"}),Object(b.jsx)(L.a.Control,{required:!0,name:"password",value:n,type:"password",placeholder:"Password",onChange:this.handleChange})]}),Object(b.jsx)(q.a,{variant:"primary",type:"submit",children:"Submit"}),Object(b.jsx)(L.a.Check,{type:"checkbox",id:"default-checkbox",label:"Keep me logged in",checked:a,onChange:this.toggleChecked})]})]})})}}]),n}(a.Component),W=Object(h.f)(V),Y=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.msgAlert,n=e.history,a=e.clearUser;(function(e){return E()({url:N+"/sign-out/",method:"DELETE",headers:{Authorization:"Bearer ".concat(e.token)}})})(e.user).finally((function(){return t({heading:"Signed Out Successfully",message:"Come back soon!",variant:"success"})})).finally((function(){window&&window.localStorage.removeItem("user")})).finally((function(){return n.push("/sign-in")})).finally((function(){return a()}))}},{key:"render",value:function(){return""}}]),n}(a.Component),R=Object(h.f)(Y),K=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=function(e){return a.setState(Object(z.a)({},e.target.name,e.target.value))},a.onChangePassword=function(e){e.preventDefault();var t=a.props,n=t.msgAlert,s=t.history,r=t.user;(function(e,t){return E()({url:N+"/change-password/",method:"PATCH",headers:{Authorization:"Bearer ".concat(t.token)},data:{passwords:{old:e.oldPassword,new:e.newPassword}}})})(a.state,r).then((function(){return n({heading:"Change Password Success",message:"Password changed successfully!",variant:"success"})})).then((function(){return s.push("/")})).catch((function(e){a.setState({oldPassword:"",newPassword:""}),n({heading:"Change Password Failed with error: "+e.message,message:"Failed to change passwords. Check your old password and try again.",variant:"danger"})}))},a.state={oldPassword:"",newPassword:""},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.oldPassword,n=e.newPassword;return Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(b.jsx)("h3",{children:"Change Password"}),Object(b.jsxs)(L.a,{onSubmit:this.onChangePassword,children:[Object(b.jsxs)(L.a.Group,{controlId:"oldPassword",children:[Object(b.jsx)(L.a.Label,{children:"Old password"}),Object(b.jsx)(L.a.Control,{required:!0,name:"oldPassword",value:t,type:"password",placeholder:"Old Password",onChange:this.handleChange})]}),Object(b.jsxs)(L.a.Group,{controlId:"newPassword",children:[Object(b.jsx)(L.a.Label,{children:"New Password"}),Object(b.jsx)(L.a.Control,{required:!0,name:"newPassword",value:n,type:"password",placeholder:"New Password",onChange:this.handleChange})]}),Object(b.jsx)(q.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})}}]),n}(a.Component),Q=Object(h.f)(K),X=function(e,t){return E()({method:"GET",url:"".concat(N,"/posts/").concat(t),headers:{Authorization:"Bearer ".concat(e.token)}})},Z=n(36),$=n.n(Z),ee=n(29),te=(n(50),n(51),n(112),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=Object(z.a)({},e.target.name,e.target.value);a.setState((function(e){return{post:Object(j.a)(Object(j.a)({},e.post),t)}}))},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.user,s=t.msgAlert,r=t.history,o=t.match;(function(e,t,n){return E()({method:"PATCH",url:"".concat(N,"/posts/").concat(n),headers:{Authorization:"Bearer ".concat(t.token)},data:{post:{title:e.title,content:e.content}}})})(a.state.post,n,o.params.id).then((function(e){return r.push("/posts/"+o.params.id)})).then((function(){return s({heading:"Post Updated!",message:"Nice work, go check out your post.",variant:"success"})})).catch((function(e){s({heading:"Post update failed :(",message:"Something went wrong: "+e.message,variant:"danger"})}))},a.state={post:{title:"",content:""}},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.match,a=t.user,s=t.msgAlert;X(a,n.params.id).then((function(t){return e.setState({post:t.data.post})})).then((function(){return s({heading:"Show post success",message:"Check out the post",variant:"success"})})).catch((function(e){return s({heading:"Show post failed :(",message:"Something went wrong: "+e.message,variant:"danger"})}))}},{key:"render",value:function(){var e=this,t=this.state.post,n=this.props.match;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h5",{id:"updatePostHeader",children:"Edit Post"}),Object(b.jsx)("div",{className:"postContainer",children:Object(b.jsxs)(L.a,{onSubmit:this.handleSubmit,children:[Object(b.jsx)(L.a.Group,{controlId:"title",children:Object(b.jsx)(L.a.Control,{required:!0,className:"titleInput",name:"title",value:t.title,placeholder:"Post Title",onChange:this.handleChange})}),Object(b.jsx)(L.a.Group,{controlId:"content",children:Object(b.jsx)($.a,{className:"border codeEditor",value:t.content,onValueChange:function(t){return e.setState({content:t})},highlight:function(e){return Object(ee.highlight)(e,ee.languages.js)},padding:10})}),Object(b.jsx)(q.a,{id:"updatePostButton",variant:"primary",type:"submit",children:"Update"})]})}),Object(b.jsx)(w.b,{to:"/posts/".concat(n.params.id),children:Object(b.jsx)(q.a,{size:"sm",className:"btn",children:"Go back"})})]})}}]),n}(a.Component)),ne=Object(h.f)(te),ae=(n(113),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=function(e){return a.setState(Object(z.a)({},e.target.name,e.target.value))},a.onCreateComment=function(e){e.preventDefault();var t=Date.now();a.setState({createdAt:t},(function(){var e=a.props,t=e.msgAlert,n=e.user,s=e.postId,r=e.updateComments,o=e.showComments,c=e.toggleComments,i=a.state,u=i.content,l=i._id,d=i.timestamp;(function(e,t,n){return E()({method:"POST",url:N+"/posts/".concat(n,"/comments/"),headers:{Authorization:"Bearer ".concat(t.token)},data:{comment:{ownerName:e.ownerName,owner:e.owner,content:e.content,_id:e._id,createdAt:e.createdAt}}})})(a.state,n,s).then((function(){return r({ownerName:n.username,owner:n._id,content:u,_id:l,createdAt:d})})).then((function(){o||c()})).then((function(){a.setState({content:""})})).catch((function(e){t({heading:"Couldn't Create Comment",message:"Failed to create comment, please double check your input and try again. Error: "+e.message,variant:"danger"})})).finally((function(){a.setState({_id:Object(m.a)()})}))}))},a.state={ownerName:e.user.username,content:"",created:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setState({_id:Object(m.a)()})}},{key:"render",value:function(){var e=this.state.content;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(L.a,{onSubmit:this.onCreateComment,children:Object(b.jsx)(L.a.Group,{children:Object(b.jsx)(L.a.Control,{required:!0,autoComplete:"off",className:"commentInput",name:"content",value:e,placeholder:"Add Comment",onChange:this.handleChange})})})})}}]),n}(a.Component)),se=Object(h.f)(ae),re=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(z.a)({},e.target.name,e.target.value))},a.onEditComment=function(e){e.preventDefault();var t=a.props,n=t.comment,s=t.user,r=t.postId,o=t.updateComments,c=t.toggle,i=a.state.content,u=Object(j.a)({},n);u.content=i,function(e,t,n){E()({method:"PATCH",url:N+"/posts/".concat(n,"/comments/"),headers:{Authorization:"Bearer ".concat(t.token)},data:{comment:{ownerName:e.ownerName,owner:e.owner,content:e.content,_id:e._id}}})}(u,s,r),o(u),c("showEdit")},a.state={deleted:!1,content:""},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.comment;this.setState({content:e.content})}},{key:"render",value:function(){var e=this.state,t=e.deleted,n=e.content;return t?Object(b.jsx)(h.a,{to:{pathname:"/home"}}):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(L.a,{onSubmit:this.onEditComment,children:[Object(b.jsx)(L.a.Group,{controlId:"content",children:Object(b.jsx)(L.a.Control,{required:!0,name:"content",value:n,placeholder:"Comment",onChange:this.handleChange})}),Object(b.jsx)(q.a,{variant:"primary",type:"submit",children:"Update"})]})})}}]),n}(a.Component),oe=Object(h.f)(re),ce=(n(114),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){var e=a.props.createdAt,t=new Date(e),n=(Date.now()-t)/1e3,s=n/60,r=s/60,o=r/24,c=o/7,i=c/4,u=n<60?{value:n,unit:"second"}:s<60?{value:s,unit:"minute"}:r<24?{value:r,unit:"hour"}:o<7?{value:o,unit:"day"}:c<4?{value:c,unit:"week"}:i<12?{value:i,unit:"month"}:{value:i/12,unit:"year"};u.value=u.value.toFixed(0);var l="1"===u.value?"":"s",d=isNaN(u.value)?"Just now":"".concat(u.value," ").concat(u.unit).concat(l," ago");a.setState({dateText:d})},a.state={dateText:""},a}return Object(u.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{className:"date",children:this.state.dateText})}}]),n}(a.Component)),ie=Object(h.f)(ce),ue=(n(115),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).toggle=function(e){a.setState((function(t){return Object(z.a)({},e,!t[e])}))},a.onDestroyComment=function(e){e.preventDefault();var t=a.props,n=t.comment,s=t.user,r=t.postId,o=t.updateComments;!function(e,t,n){E()({method:"DELETE",url:N+"/posts/".concat(t,"/comments/"),headers:{Authorization:"Bearer ".concat(e.token)},data:{commentId:n,userId:e._id}})}(s,r,n._id),o(n._id)},a.state={comment:null,showEdit:!1,showButtons:!1,deleted:!1},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.deleted,a=t.showEdit,s=t.showButtons,r=this.props,o=r.comment,c=r.user,i=r.msgAlert,u=r.postId,l=r.updateComments,d=o.owner===c._id&&s&&!a,m=Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(q.a,{size:"sm",variant:"secondary",className:"commentButton",onClick:function(){return e.toggle("showEdit")},children:"Edit"}),Object(b.jsx)(q.a,{size:"sm",variant:"danger",className:"commentButton",onClick:this.onDestroyComment,children:"Delete"})]}),j=Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(oe,{toggle:this.toggle,updateComments:l,msgAlert:i,comment:o,postId:u,user:c}),Object(b.jsx)(q.a,{size:"sm",variant:"danger",onClick:function(){return e.toggle("showEdit")},children:"Cancel"})]});return n?Object(b.jsx)(h.a,{to:{pathname:"/home"}}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{onClick:function(){return e.toggle("showButtons")},children:Object(b.jsxs)("div",{className:"comment",children:[Object(b.jsx)(w.b,{to:"/profile/".concat(o.ownerName),className:"commentOwner",children:o.ownerName}),a?j:o.content,Object(b.jsx)(ie,{createdAt:o.createdAt}),d?m:""]})})})}}]),n}(a.Component)),le=Object(h.f)(ue),de=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={comments:[],loading:!1},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.comments,n=e.msgAlert,a=e.user,s=e.postId,r=e.postOwner,o=e.updateComments;return Object(b.jsx)("div",{children:t.map((function(e){return Object(b.jsx)("div",{children:Object(b.jsx)(le,{updateComments:o,postOwner:r,msgAlert:n,comment:e,postId:s,user:a})},e._id)}))})}}]),n}(a.Component),he=(n(65),n(66),n(67),n(68),n(69),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).goToPost=function(e){if(e.target.classList.contains("post")){var t=a.props,n=t.post;t.history.push("/posts/".concat(n._id))}},a.updateComments=function(e){var t=a.state.comments,n=Object(c.a)(t);if("string"===typeof e){var s=t.findIndex((function(t){return t._id===e}));n.splice(s,1),a.setState({comments:n})}else{var r=t.findIndex((function(t){return t._id===e._id}));r>=0?(n.splice(r,1,e),a.setState({comments:n})):a.setState((function(t){return{comments:[].concat(Object(c.a)(t.comments),[e])}}))}},a.toggleComments=function(){a.setState((function(e){return{showComments:!e.showComments}}))},a.state={comments:[],showComments:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.post;this.setState({comments:e.comments})}},{key:"render",value:function(){var e=this,t=this.props,n=t.msgAlert,a=t.user,s=t.post,r=this.state,o=r.showComments,c=r.comments,i=1===c.length?"":"s",u=Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(de,{updateComments:this.updateComments,msgAlert:n,user:a,comments:c,postId:s._id}),Object(b.jsx)(se,{updateComments:this.updateComments,toggleComments:this.toggleComments,showComments:o,msgAlert:n,user:a,postId:s._id,postOwner:s.owner._id})]});return Object(b.jsxs)("div",{className:"post postContainer",onClick:function(t){return e.goToPost(t)},children:[Object(b.jsxs)("div",{className:"post postTitle",children:[Object(b.jsx)(w.b,{to:"/profile/".concat(s.owner.username),className:"postOwner",children:s.owner.username}),s.title,Object(b.jsx)(ie,{createdAt:s.createdAt})]}),Object(b.jsx)($.a,{className:"border codeEditor post postContent",placeholder:"// your code here",value:s.content,onValueChange:function(){return null},highlight:function(e){return Object(ee.highlight)(e,ee.languages.js)},padding:10}),Object(b.jsx)(q.a,{className:"showComments",size:"sm",variant:"outline-primary",onClick:this.toggleComments,children:o?"Hide Comments":"".concat(c.length," Comment").concat(i)}),o?u:""]})}}]),n}(a.Component)),me=Object(h.f)(he),je=(n(116),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=function(e){return a.setState(Object(z.a)({},e.target.name,e.target.value))},a.onCreatePost=function(e){e.preventDefault();var t=a.props,n=t.msgAlert,s=t.history,r=t.user,o=t.updatePosts;(function(e,t){return E()({method:"POST",url:N+"/posts/",headers:{Authorization:"Bearer ".concat(t.token)},data:{post:{owner:e.owner,title:e.title,content:e.content}}})})(a.state,r).then((function(e){return a.setState({postId:e.data.post._id}),e})).then((function(e){return o({owner:r,title:a.state.title,content:a.state.content,comments:[],_id:e.data.post._id})})).then((function(){return s.push("/home")})).then((function(){n({heading:"Post Created",message:"Your post has successfully been created.",variant:"success"})})).catch((function(e){n({heading:"Couldn't Create Post",message:"Failed to create post, please double check your input and try again. Error: "+e.message,variant:"danger"})}))},a.state={title:"",content:"",postId:null},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state.title;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h5",{id:"createPostHeader",children:"Create Post"}),Object(b.jsx)("div",{className:"postContainer",children:Object(b.jsxs)(L.a,{onSubmit:this.onCreatePost,children:[Object(b.jsx)(L.a.Group,{controlId:"title",children:Object(b.jsx)(L.a.Control,{required:!0,autoComplete:"off",className:"titleInput",name:"title",value:t,placeholder:"Post Title",onChange:this.handleChange})}),Object(b.jsx)(L.a.Group,{controlId:"content",children:Object(b.jsx)($.a,{className:"border codeEditor",placeholder:"// your code here",value:this.state.content,onValueChange:function(t){return e.setState({content:t})},highlight:function(e){return Object(ee.highlight)(e,ee.languages.js)},padding:10})}),Object(b.jsx)(q.a,{id:"createPostButton",variant:"primary",type:"submit",children:"Create"})]})})]})}}]),n}(a.Component)),pe=Object(h.f)(je),be=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).updatePosts=function(e){a.setState((function(t){return{posts:[e].concat(Object(c.a)(t.posts))}}))},a.state={posts:[],loading:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.user,a=t.msgAlert;(function(e){return E()({method:"GET",url:N+"/home/",headers:{Authorization:"Bearer ".concat(e.token)}})})(n).then((function(t){return e.setState({posts:t.data.posts.reverse()})})).catch((function(e){a({heading:"Couldn't Create Post",message:M+e.message,variant:"danger"})}))}},{key:"render",value:function(){var e=this.state.posts,t=this.props,n=t.user,a=t.msgAlert;return Object(b.jsxs)("div",{children:[Object(b.jsx)(pe,{updatePosts:this.updatePosts,msgAlert:a,user:n}),e.map((function(e){return Object(b.jsx)("div",{children:Object(b.jsx)(me,{msgAlert:a,user:n,post:e,comments:e.comments})},e._id)}))]})}}]),n}(a.Component),ge=n(72),Oe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).destroy=function(){var e=a.props,t=e.user,n=e.match,s=e.msgAlert;(function(e,t){return E()({method:"DELETE",url:"".concat(N,"/posts/").concat(t),headers:{Authorization:"Bearer ".concat(e.token)}})})(t,n.params.id).then((function(){s({heading:"Post Deleted",message:"Your post has successfully been deleted.",variant:"success"})})).then((function(){return a.setState({deleted:!0})})).catch((function(e){s({heading:"Couldn't Delete Post",message:"Something went wrong while deleting this post, please refresh and try again. Error: "+e.message,variant:"danger"})}))},a.state={post:null,deleted:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.user,a=t.match,s=t.msgAlert;X(n,a.params.id).then((function(t){return e.setState({post:t.data.post})})).catch((function(e){s({heading:"Couldn't Create Post",message:"Couldn't find this post. Please refresh the page and try again. Error: "+e.message,variant:"danger"})}))}},{key:"render",value:function(){var e=this.state,t=e.post,n=e.deleted,a=this.props,s=a.user,r=a.msgAlert,o=Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(w.b,{to:"/posts/".concat(this.props.match.params.id,"/edit"),children:Object(b.jsx)(q.a,{size:"sm",variant:"primary",children:"Edit"})}),Object(b.jsx)(q.a,{size:"sm",variant:"danger",onClick:this.destroy,children:"Delete post"})]});return t?n?Object(b.jsx)(h.a,{to:{pathname:"/home"}}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(me,{msgAlert:r,user:s,post:t,comments:t.comments}),Object(b.jsx)(w.b,{to:"/home",children:Object(b.jsx)(q.a,{size:"sm",className:"btn",children:"Go back"})}),t.owner._id===s._id?o:""]}):Object(b.jsx)(ge.a,{animation:"border",role:"status",children:Object(b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}}]),n}(a.Component),fe=Object(h.f)(Oe),ve=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).getUserProfile=function(e){if(a._isMounted){var t=a.props,n=t.user,s=t.msgAlert;(function(e,t){return E()({method:"GET",url:"".concat(N).concat(t),headers:{Authorization:"Bearer ".concat(e.token)}})})(n,e).then((function(e){return a.setState({posts:e.data.posts})})).catch((function(e){s({heading:"Couldn't Create Post",message:M+e.message,variant:"danger"})}))}},a.updatePosts=function(e){a.setState((function(t){return{posts:[e].concat(Object(c.a)(t.posts))}}))},a._isMounted=!1,a.state={posts:[],path:""},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=this.props.history,n=this.state.path;this.getUserProfile(t.location.pathname),this.setState({path:t.location.pathname}),this.unlisten=t.listen((function(t){var a=t.pathname.split("/")[1];t.pathname!==n&&"profile"===a&&e.getUserProfile(t.pathname)}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.unlisten()}},{key:"render",value:function(){var e=this.state.posts,t=this.props,n=t.user,a=t.msgAlert;return Object(b.jsxs)("div",{children:[Object(b.jsx)(pe,{updatePosts:this.updatePosts,msgAlert:a,user:n}),e.map((function(e){return Object(b.jsx)("div",{children:Object(b.jsx)(me,{msgAlert:a,user:n,post:e,comments:e.comments})},e._id)}))]})}}]),n}(a.Component),xe=Object(h.f)(ve),Ce=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).setUser=function(e){return a.setState({user:e})},a.clearUser=function(){return a.setState({user:null})},a.deleteAlert=function(e){a.setState((function(t){return{msgAlerts:t.msgAlerts.filter((function(t){return t.id!==e}))}}))},a.msgAlert=function(e){var t=e.heading,n=e.message,s=e.variant,r=Object(m.a)();a.setState((function(e){return{msgAlerts:[].concat(Object(c.a)(e.msgAlerts),[{heading:t,message:n,variant:s,id:r}])}}))},a.state={user:null,msgAlerts:[]},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.history,t=JSON.parse(window.localStorage.getItem("user"));window&&(this.setUser(t),e.push("/home"))}},{key:"render",value:function(){var e=this,t=this.state,n=t.msgAlerts,a=t.user;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(B,{user:a}),n.map((function(t){return Object(b.jsx)(v,{heading:t.heading,variant:t.variant,message:t.message,id:t.id,deleteAlert:e.deleteAlert},t.id)})),Object(b.jsxs)("main",{className:"container col-sm-12 col-lg-4",children:[Object(b.jsx)(h.b,{path:"/sign-up",render:function(){return Object(b.jsx)(J,{msgAlert:e.msgAlert,setUser:e.setUser})}}),Object(b.jsx)(h.b,{path:"/sign-in",render:function(){return Object(b.jsx)(W,{msgAlert:e.msgAlert,setUser:e.setUser})}}),Object(b.jsx)(O,{user:a,path:"/sign-out",render:function(){return Object(b.jsx)(R,{msgAlert:e.msgAlert,clearUser:e.clearUser,user:a})}}),Object(b.jsx)(O,{user:a,path:"/change-password",render:function(){return Object(b.jsx)(Q,{msgAlert:e.msgAlert,user:a})}}),Object(b.jsx)(O,{user:a,exact:!0,path:"/posts/:id/edit",render:function(){return Object(b.jsx)(ne,{msgAlert:e.msgAlert,user:a})}}),Object(b.jsx)(O,{user:a,exact:!0,path:"/home",render:function(){return Object(b.jsx)(be,{msgAlert:e.msgAlert,user:a})}}),Object(b.jsx)(O,{user:a,exact:!0,path:"/posts/:id",render:function(){return Object(b.jsx)(fe,{msgAlert:e.msgAlert,user:a})}}),Object(b.jsx)(O,{user:a,exact:!0,path:"/profile/:username",render:function(){return Object(b.jsx)(xe,{msgAlert:e.msgAlert,user:a})}})]})]})}}]),n}(a.Component),we=Object(h.f)(Ce),ye=Object(b.jsx)(w.a,{basename:"/console-client",children:Object(b.jsx)(we,{})});o.a.render(ye,document.getElementById("root"))},69:function(e,t,n){},79:function(e,t,n){},88:function(e,t,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.edf32a01.chunk.js.map